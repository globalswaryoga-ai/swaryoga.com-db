# ğŸ¨ Visual Data Flow Diagrams - Swar Yoga

## Diagram 1: Complete Request-Response Cycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (React + Vite)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  SadhakaPlannerPage.tsx (React Component)                                  â”‚
â”‚  â”œâ”€ User clicks "Add Goal" button                                          â”‚
â”‚  â””â”€ Calls: goalAPI.create({ title, description })                         â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚  sadhakaPlannerData.ts (API SDK)                                           â”‚
â”‚  â”œâ”€ Extract userId from localStorage['user']                              â”‚
â”‚  â”œâ”€ Set header: X-User-ID = userId                                        â”‚
â”‚  â”œâ”€ Make HTTP POST request to /api/goals                                  â”‚
â”‚  â””â”€ Cache response in localStorage                                         â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚  Axios Interceptor                                                          â”‚
â”‚  â”œâ”€ Add CORS headers                                                       â”‚
â”‚  â”œâ”€ Add Content-Type: application/json                                     â”‚
â”‚  â””â”€ Add X-User-ID header                                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    ğŸŒ HTTP Network Request ğŸŒ
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    EXPRESS.JS BACKEND (Port 4000)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  server/server.ts                                                           â”‚
â”‚  â”œâ”€ Receive HTTP request                                                   â”‚
â”‚  â””â”€ Route to POST /api/goals handler                                       â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚  server/routes/goals.ts                                                     â”‚
â”‚  â”œâ”€ Extract userId from header: req.headers['x-user-id']                  â”‚
â”‚  â”œâ”€ Validate request body (title, description required)                   â”‚
â”‚  â”œâ”€ Create new Goal object:                                                â”‚
â”‚  â”‚   const goal = new Goal({                                               â”‚
â”‚  â”‚     userId: 'user_abc123',  â† User isolation key                       â”‚
â”‚  â”‚     title: 'My Goal',                                                  â”‚
â”‚  â”‚     status: 'Not Started'   â† Default value                            â”‚
â”‚  â”‚   })                                                                    â”‚
â”‚  â””â”€ Call goal.save()                                                       â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚  server/models/Goal.ts (Mongoose Schema)                                    â”‚
â”‚  â”œâ”€ Validate data against schema:                                          â”‚
â”‚  â”‚   - userId: String (required, indexed)                                 â”‚
â”‚  â”‚   - title: String (required)                                           â”‚
â”‚  â”‚   - status: enum ['Not Started', 'In Progress', 'Completed']           â”‚
â”‚  â”‚   - createdAt: Date (auto-set)                                         â”‚
â”‚  â”‚   - updatedAt: Date (auto-set)                                         â”‚
â”‚  â”œâ”€ Generate _id using UUID (not MongoDB ObjectId)                        â”‚
â”‚  â””â”€ Call MongoDB save()                                                    â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚  MongoDB Validation & Indexing                                             â”‚
â”‚  â”œâ”€ Check schema constraints                                               â”‚
â”‚  â”œâ”€ Verify userId is not empty (required field)                            â”‚
â”‚  â”œâ”€ Use index on { userId: 1, createdAt: -1 } for fast insert             â”‚
â”‚  â””â”€ âœ… Document inserted successfully                                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                    ğŸŒ HTTP Network Response ğŸŒ
                                  â”‚
                                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FRONTEND (React + Vite)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Receive Response (HTTP 201 Created)                                        â”‚
â”‚  {                                                                          â”‚
â”‚    "success": true,                                                         â”‚
â”‚    "data": {                                                                â”‚
â”‚      "_id": "goal_550e8400",                                               â”‚
â”‚      "userId": "user_abc123",                                              â”‚
â”‚      "title": "My Goal",                                                   â”‚
â”‚      "status": "Not Started",                                              â”‚
â”‚      "createdAt": "2025-12-10T10:15:00Z"                                  â”‚
â”‚    }                                                                        â”‚
â”‚  }                                                                          â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚  sadhakaPlannerData.ts                                                      â”‚
â”‚  â”œâ”€ Cache response: localStorage['cached_goals']                           â”‚
â”‚  â””â”€ Return data to component                                               â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚  React Component (SadhakaPlannerPage.tsx)                                   â”‚
â”‚  â”œâ”€ Receive response data                                                  â”‚
â”‚  â”œâ”€ Update state: setGoals([...goals, result.data])                       â”‚
â”‚  â””â”€ Trigger re-render                                                      â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚  Browser Re-renders                                                         â”‚
â”‚  â”œâ”€ DOM updates with new goal in list                                      â”‚
â”‚  â”œâ”€ Show success toast notification                                        â”‚
â”‚  â””â”€ âœ… User sees new goal on screen                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Diagram 2: User Data Isolation (Multi-User Safety)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           MongoDB Database                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Collection: goals                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Document 1                                                          â”‚   â”‚
â”‚  â”‚ {                                                                   â”‚   â”‚
â”‚  â”‚   "_id": "goal_550e8400",                                          â”‚   â”‚
â”‚  â”‚   "userId": "user_abc123",        â—„â”€â”€ User A's data               â”‚   â”‚
â”‚  â”‚   "title": "Complete certification",                               â”‚   â”‚
â”‚  â”‚   "status": "In Progress"                                          â”‚   â”‚
â”‚  â”‚ }                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Document 2                                                          â”‚   â”‚
â”‚  â”‚ {                                                                   â”‚   â”‚
â”‚  â”‚   "_id": "goal_660e8400",                                          â”‚   â”‚
â”‚  â”‚   "userId": "user_xyz789",        â—„â”€â”€ User B's data               â”‚   â”‚
â”‚  â”‚   "title": "Learn meditation",                                     â”‚   â”‚
â”‚  â”‚   "status": "Not Started"                                          â”‚   â”‚
â”‚  â”‚ }                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Document 3                                                          â”‚   â”‚
â”‚  â”‚ {                                                                   â”‚   â”‚
â”‚  â”‚   "_id": "goal_770e8400",                                          â”‚   â”‚
â”‚  â”‚   "userId": "user_abc123",        â—„â”€â”€ User A's data               â”‚   â”‚
â”‚  â”‚   "title": "Practice daily",                                       â”‚   â”‚
â”‚  â”‚   "status": "Completed"                                            â”‚   â”‚
â”‚  â”‚ }                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  Index: { userId: 1, createdAt: -1 }                                       â”‚
â”‚  â””â”€ Enables FAST queries by user                                           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼                 â–¼                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ User A Login â”‚  â”‚ User B Login â”‚  â”‚ User C Login â”‚
        â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
        â”‚ userId:      â”‚  â”‚ userId:      â”‚  â”‚ userId:      â”‚
        â”‚ abc123       â”‚  â”‚ xyz789       â”‚  â”‚ def456       â”‚
        â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                 â”‚                 â”‚
               â–¼                 â–¼                 â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Sees:        â”‚  â”‚ Sees:        â”‚  â”‚ Sees:        â”‚
        â”‚              â”‚  â”‚              â”‚  â”‚              â”‚
        â”‚ goal_550e8400â”‚  â”‚ goal_660e8400â”‚  â”‚ (nothing)    â”‚
        â”‚ goal_770e8400â”‚  â”‚              â”‚  â”‚              â”‚
        â”‚              â”‚  â”‚ (2 goals)    â”‚  â”‚ (0 goals)    â”‚
        â”‚ (2 goals)    â”‚  â”‚              â”‚  â”‚              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Security:** Each user ONLY sees their own data because:
1. Frontend header: X-User-ID added to every request âœ“
2. Backend filter: `Goal.find({ userId })` âœ“
3. Database index: Fast lookup by userId âœ“

---

## Diagram 3: Data Persistence Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Application: Swar Yoga                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                         LAYER 1: BROWSER MEMORY                            â”‚
â”‚                    (React State - Fast, Temporary)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ useState({ goals: [...] })  - Lives in RAM                         â”‚  â”‚
â”‚  â”‚ Available while component is mounted                               â”‚  â”‚
â”‚  â”‚ Lost on page refresh âŒ                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚                                        â”‚
â”‚                                  â–¼                                        â”‚
â”‚                    LAYER 2: LOCAL STORAGE                                â”‚
â”‚                  (Browser Disk - Medium Speed)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ localStorage['cached_goals'] - Lives in browser disk               â”‚  â”‚
â”‚  â”‚ Persists across page refreshes âœ“                                   â”‚  â”‚
â”‚  â”‚ Persists across browser restarts âœ“                                 â”‚  â”‚
â”‚  â”‚ Lost on clear browser data âŒ                                       â”‚  â”‚
â”‚  â”‚ Capacity: ~5-10MB                                                  â”‚  â”‚
â”‚  â”‚ Used for: Offline fallback                                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚                                        â”‚
â”‚                                  â–¼                                        â”‚
â”‚                   LAYER 3: BACKEND CACHE                                 â”‚
â”‚                    (Server RAM - Medium Speed)                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Express.js in-memory cache (optional)                              â”‚  â”‚
â”‚  â”‚ Fast access for frequently requested data                          â”‚  â”‚
â”‚  â”‚ Lost if server restarts âŒ                                          â”‚  â”‚
â”‚  â”‚ Not currently used in Swar Yoga                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚                                        â”‚
â”‚                                  â–¼                                        â”‚
â”‚                  LAYER 4: DATABASE (PERSISTENT)                          â”‚
â”‚            (MongoDB Atlas - Slow but Permanent Storage)                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ swar-yoga-db (MongoDB Collections)                                 â”‚  â”‚
â”‚  â”‚ Persists across server restarts âœ“                                  â”‚  â”‚
â”‚  â”‚ Persists across application updates âœ“                              â”‚  â”‚
â”‚  â”‚ Backed up daily âœ“                                                  â”‚  â”‚
â”‚  â”‚ Capacity: Unlimited (cloud-based)                                  â”‚  â”‚
â”‚  â”‚ Latency: ~50-200ms per query                                       â”‚  â”‚
â”‚  â”‚ ACID transactions: Yes (MongoDB 4.0+)                              â”‚  â”‚
â”‚  â”‚ Replicated across 3 nodes (high availability)                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚                                        â”‚
â”‚                                  â–¼                                        â”‚
â”‚                   LAYER 5: AUTOMATED BACKUPS                             â”‚
â”‚               (Separate Backup Files - Insurance)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Daily automatic backups (server/backup.ts)                         â”‚  â”‚
â”‚  â”‚ File: backups/backup-2025-12-10.json                              â”‚  â”‚
â”‚  â”‚ Restores via: /api/backup/restore endpoint                         â”‚  â”‚
â”‚  â”‚ Protection: Recover from accidental deletions                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Data Flow:
1. User enters data â†’ Stored in React state (Layer 1)
2. User saves â†’ API call to backend
3. Backend stores in MongoDB (Layer 4)
4. Frontend caches response (Layer 2)
5. Backend creates daily backup (Layer 5)
6. User can access data offline from cache (Layer 2)
7. When online, data syncs with MongoDB (Layer 4)
```

---

## Diagram 4: API Request Flow with Error Handling

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Frontend: User Clicks Save                             â”‚
â”‚                                                                             â”‚
â”‚   goalAPI.create({ title, description })                                   â”‚
â”‚                    â”‚                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Prepare Request           â”‚
        â”‚  - Extract userId          â”‚
        â”‚  - Add X-User-ID header    â”‚
        â”‚  - Set Content-Type        â”‚
        â”‚  - Serialize JSON          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Send HTTP POST Request    â”‚
        â”‚  POST /api/goals           â”‚
        â”‚  http://localhost:4000/api â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                     â”‚
          â–¼ (Success)          â–¼ (Error)
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Backend Online  â”‚   â”‚ Network Error   â”‚
   â”‚                 â”‚   â”‚ (No Connection) â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                     â”‚
            â–¼                     â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Axios Retry Logic                      â”‚
   â”‚  1. Wait 1 second                       â”‚
   â”‚  2. Retry request                       â”‚
   â”‚  3. If fails, try fallback              â”‚
   â”‚  4. Fallback: Try localhost:4000        â”‚
   â”‚  5. If fails, use localStorage cache    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                 â”‚
   â–¼ (Success)      â–¼ (Fail)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Save OK  â”‚  â”‚ Use Cached Data   â”‚
â”‚ Return   â”‚  â”‚ (Offline Mode)    â”‚
â”‚ 201      â”‚  â”‚ Return cached     â”‚
â”‚          â”‚  â”‚ from localStorage â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                 â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Frontend Processes       â”‚
   â”‚ Response Data            â”‚
   â”‚ - Cache locally          â”‚
   â”‚ - Update React state     â”‚
   â”‚ - Notify user            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ UI Re-renders            â”‚
   â”‚ - Show new item          â”‚
   â”‚ - Show success toast      â”‚
   â”‚ - Clear form             â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Diagram 5: Authentication & User ID Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           User Sign In                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Frontend: src/pages/SigninPage.tsx                                         â”‚
â”‚  User enters: email@example.com, password123                               â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚  API Call: authAPI.signin(email, password)                                 â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚  Backend: POST /api/auth/signin                                            â”‚
â”‚  â”œâ”€ Check if user exists in database                                       â”‚
â”‚  â”œâ”€ Verify password hash                                                   â”‚
â”‚  â””â”€ Return: { success: true, data: { _id, email, name, ... } }           â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚  Frontend: AuthContext.tsx                                                 â”‚
â”‚  â”œâ”€ Save response to localStorage['user']                                  â”‚
â”‚  â”œâ”€ Structure: { _id: 'user_abc123', email, name, ... }                  â”‚
â”‚  â””â”€ Update context: setUser(userData)                                      â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚  Now User is Logged In âœ“                                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Every subsequent API request:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Any API Call (e.g., goalAPI.list())                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Axios Interceptor (sadhakaPlannerData.ts)                                 â”‚
â”‚  â”œâ”€ Step 1: Get userId from localStorage['user']                          â”‚
â”‚  â”‚   const userStr = localStorage.getItem('user')                         â”‚
â”‚  â”‚   const userObj = JSON.parse(userStr)                                  â”‚
â”‚  â”‚   const userId = userObj._id  (= 'user_abc123')                        â”‚
â”‚  â”‚                                                                         â”‚
â”‚  â”œâ”€ Step 2: Add to request header                                         â”‚
â”‚  â”‚   config.headers['X-User-ID'] = 'user_abc123'                         â”‚
â”‚  â”‚                                                                         â”‚
â”‚  â””â”€ Step 3: Send request with header                                      â”‚
â”‚      GET /api/goals                                                        â”‚
â”‚      X-User-ID: user_abc123                                               â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚  Backend: routes/goals.ts                                                   â”‚
â”‚  â”œâ”€ Extract userId from header                                            â”‚
â”‚  â”‚   const userId = req.headers['x-user-id']  (= 'user_abc123')          â”‚
â”‚  â”‚                                                                         â”‚
â”‚  â””â”€ Query only this user's goals                                          â”‚
â”‚      await Goal.find({ userId })  âœ“                                        â”‚
â”‚                                                                             â”‚
â”‚      â† Returns only goals where userId === 'user_abc123'                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Diagram 6: Database Schema Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          MongoDB Database Schema                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  users collection                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚  â”‚ _id: "user_abc123"                   â”‚                                 â”‚
â”‚  â”‚ email: "john@example.com"            â”‚                                 â”‚
â”‚  â”‚ name: "John Doe"                     â”‚                                 â”‚
â”‚  â”‚ createdAt: 2025-01-01                â”‚                                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚             â”‚ userId relationship                                          â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚     â–¼                                 â–¼                                    â”‚
â”‚  visions collection            goals collection                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚ _id: "vision_550e8400"   â”‚  â”‚ _id: "goal_660e8400"     â”‚               â”‚
â”‚  â”‚ userId: "user_abc123"  â”€â”€â”¼â”€â”€â”‚ userId: "user_abc123"  â”€â”€â”¼â”€â”€â”            â”‚
â”‚  â”‚ title: "Career Growth"   â”‚  â”‚ title: "Learn Coding"    â”‚  â”‚            â”‚
â”‚  â”‚ status: "Active"         â”‚  â”‚ visionId: "vision_..."   â”‚  â”‚            â”‚
â”‚  â”‚ createdAt: 2025-01-02    â”‚  â”‚ status: "In Progress"    â”‚  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚            â”‚
â”‚                                         â”‚                   â”‚            â”‚
â”‚                                         â–¼ goalId relationshipâ”‚            â”‚
â”‚                                    tasks collection         â”‚            â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚            â”‚
â”‚                                    â”‚ _id: "task_770e8400" â”‚ â”‚            â”‚
â”‚                                    â”‚ userId: "user_abc123"â”œâ”€â”˜            â”‚
â”‚                                    â”‚ title: "Complete...  â”‚               â”‚
â”‚                                    â”‚ goalId: "goal_660..."â”‚               â”‚
â”‚                                    â”‚ status: "Completed" â”‚               â”‚
â”‚                                    â”‚ createdAt: 2025-01-03              â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                            â”‚ taskId                       â”‚
â”‚                                            â–¼                              â”‚
â”‚                                    todos collection                        â”‚
â”‚                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚                                    â”‚ _id: "todo_880e8400" â”‚               â”‚
â”‚                                    â”‚ userId: "user_abc123"â”‚               â”‚
â”‚                                    â”‚ taskId: "task_770..." â”‚               â”‚
â”‚                                    â”‚ title: "Daily task"  â”‚               â”‚
â”‚                                    â”‚ completed: false     â”‚               â”‚
â”‚                                    â”‚ dueDate: 2025-12-15  â”‚               â”‚
â”‚                                    â”‚ createdAt: 2025-01-05              â”‚
â”‚                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                             â”‚
â”‚  Indexes Created:                                                           â”‚
â”‚  â”œâ”€ users: { email: 1 }          â† Fast login                             â”‚
â”‚  â”œâ”€ visions: { userId: 1, createdAt: -1 }  â† Fast user queries            â”‚
â”‚  â”œâ”€ goals: { userId: 1, createdAt: -1 }                                   â”‚
â”‚  â”œâ”€ tasks: { userId: 1, createdAt: -1 }                                   â”‚
â”‚  â””â”€ todos: { userId: 1, dueDate: 1 }  â† For daily view                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User "user_abc123" can see:
  - 1 vision (vision_550e8400)
  - 1 goal (goal_660e8400)
  - 1 task (task_770e8400)
  - 1 todo (todo_880e8400)

If User "user_xyz789" requests data:
  - Backend filters: { userId: "user_xyz789" }
  - Only sees their own documents
  - Cannot access user_abc123's data âœ“
```

---

## Diagram 7: Backup & Recovery Process

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   AUTOMATIC DAILY BACKUP SYSTEM                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Every day at Midnight (00:00 UTC):                                        â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ server/backup.ts                                                   â”‚   â”‚
â”‚  â”‚ â”œâ”€ Connect to MongoDB                                              â”‚   â”‚
â”‚  â”‚ â”œâ”€ Export ALL collections:                                         â”‚   â”‚
â”‚  â”‚ â”‚  - visions, goals, tasks, todos, health, etc.                   â”‚   â”‚
â”‚  â”‚ â”œâ”€ Create JSON file:                                               â”‚   â”‚
â”‚  â”‚ â”‚  backup-2025-12-10.json (timestamp)                             â”‚   â”‚
â”‚  â”‚ â””â”€ Save to: backups/ directory                                     â”‚   â”‚
â”‚  â”‚    (or MongoDB Atlas automatic backups)                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                     â”‚                                                      â”‚
â”‚                     â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Backup File: backups/backup-2025-12-10.json                       â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚ {                                                                   â”‚   â”‚
â”‚  â”‚   "visions": [                                                      â”‚   â”‚
â”‚  â”‚     { "_id": "vision_550e8400", "userId": "user_abc123", ... },  â”‚   â”‚
â”‚  â”‚     { "_id": "vision_660e8400", "userId": "user_xyz789", ... }   â”‚   â”‚
â”‚  â”‚   ],                                                                â”‚   â”‚
â”‚  â”‚   "goals": [ ... ],                                                â”‚   â”‚
â”‚  â”‚   "tasks": [ ... ],                                                â”‚   â”‚
â”‚  â”‚   "todos": [ ... ]                                                 â”‚   â”‚
â”‚  â”‚   ... (all 27+ collections)                                        â”‚   â”‚
â”‚  â”‚ }                                                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                     â”‚                                                      â”‚
â”‚                     â–¼                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Recovery Process (If needed):                                      â”‚   â”‚
â”‚  â”‚                                                                     â”‚   â”‚
â”‚  â”‚ User clicks "Restore Backup" in Admin Dashboard                   â”‚   â”‚
â”‚  â”‚      â”‚                                                              â”‚   â”‚
â”‚  â”‚      â–¼                                                              â”‚   â”‚
â”‚  â”‚ API Call: /api/backup/restore                                      â”‚   â”‚
â”‚  â”‚ â”œâ”€ Load backup-2025-12-10.json                                   â”‚   â”‚
â”‚  â”‚ â”œâ”€ Clear current MongoDB data (CAREFUL!)                          â”‚   â”‚
â”‚  â”‚ â”œâ”€ Re-import all collections from backup                          â”‚   â”‚
â”‚  â”‚ â””â”€ Verify restoration complete                                    â”‚   â”‚
â”‚  â”‚      â”‚                                                              â”‚   â”‚
â”‚  â”‚      â–¼                                                              â”‚   â”‚
â”‚  â”‚ âœ… Data restored to state as of 2025-12-10                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Diagram 8: Offline vs Online Data Sync

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    OFFLINE vs ONLINE SYNCHRONIZATION                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  SCENARIO 1: Internet is DOWN (Offline Mode)                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚                                                                             â”‚
â”‚  1. User tries to create goal                                              â”‚
â”‚     â””â”€ API call fails (no internet)                                        â”‚
â”‚                                                                             â”‚
â”‚  2. Fallback to localStorage                                               â”‚
â”‚     â””â”€ Read cached_goals from browser storage                             â”‚
â”‚                                                                             â”‚
â”‚  3. Show data from cache to user                                           â”‚
â”‚     â”œâ”€ User sees existing goals âœ“                                          â”‚
â”‚     â”œâ”€ User can read from cache âœ“                                          â”‚
â”‚     â””â”€ Cannot create new goals âœ— (queued for later)                       â”‚
â”‚                                                                             â”‚
â”‚  4. When Internet comes back                                               â”‚
â”‚     â””â”€ Queued changes sync automatically                                   â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  SCENARIO 2: Internet is UP (Online Mode)                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚                                                                             â”‚
â”‚  1. User creates goal                                                      â”‚
â”‚     â””â”€ API call â†’ Backend â†’ MongoDB âœ“                                      â”‚
â”‚                                                                             â”‚
â”‚  2. Response received                                                      â”‚
â”‚     â””â”€ Update localStorage cache âœ“                                         â”‚
â”‚                                                                             â”‚
â”‚  3. Update React state                                                     â”‚
â”‚     â””â”€ UI re-renders immediately âœ“                                         â”‚
â”‚                                                                             â”‚
â”‚  4. Data persisted on server                                               â”‚
â”‚     â””â”€ Available on all devices âœ“                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Diagram 9: Vercel Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            PRODUCTION DEPLOYMENT                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  User accesses: https://swaryoga.com                                        â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Vercel Global CDN                                                   â”‚   â”‚
â”‚  â”‚ (Servers worldwide)                                                â”‚   â”‚
â”‚  â”‚ â”œâ”€ Route 1: Static files (HTML, CSS, JS)                          â”‚   â”‚
â”‚  â”‚ â”‚  â””â”€ /index.html (React app)                                      â”‚   â”‚
â”‚  â”‚ â”‚                                                                  â”‚   â”‚
â”‚  â”‚ â””â”€ Route 2: API requests (/api/*)                                  â”‚   â”‚
â”‚  â”‚    â””â”€ Routes to serverless functions:                             â”‚   â”‚
â”‚  â”‚       â”œâ”€ /api/health â† api/health/index.js                        â”‚   â”‚
â”‚  â”‚       â”œâ”€ /api/visions â† api/visions/index.js                      â”‚   â”‚
â”‚  â”‚       â”œâ”€ /api/goals â† api/goals/index.js                          â”‚   â”‚
â”‚  â”‚       â””â”€ ... (other endpoints)                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚           â”‚                                                                 â”‚
â”‚           â”œâ”€ Option A: Vercel Serverless Functions                        â”‚
â”‚           â”‚  (Simple endpoints in /api directory)                         â”‚
â”‚           â”‚                                                                 â”‚
â”‚           â””â”€ Option B: Express.js Backend                                 â”‚
â”‚              (Full server at separate location)                            â”‚
â”‚              â””â”€ localhost:4000 (for development)                          â”‚
â”‚              â””â”€ Deployed Express server (for production)                  â”‚
â”‚                                                                             â”‚
â”‚  MongoDB Atlas                                                              â”‚
â”‚  â”œâ”€ swaryogadb.dheqmu1.mongodb.net                                         â”‚
â”‚  â””â”€ Database: swar-yoga-db                                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Diagram 10: Complete Data Lifecycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA LIFECYCLE IN SWAR YOGA                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  Phase 1: DATA CREATION                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚
â”‚  User fills form â†’ Click Save                                              â”‚
â”‚          â†“                                                                  â”‚
â”‚  React Component calls API SDK                                             â”‚
â”‚          â†“                                                                  â”‚
â”‚  HTTP POST request with X-User-ID header                                   â”‚
â”‚          â†“                                                                  â”‚
â”‚  Backend validates data                                                    â”‚
â”‚          â†“                                                                  â”‚
â”‚  Mongoose creates document with UUID _id                                   â”‚
â”‚          â†“                                                                  â”‚
â”‚  MongoDB saves document                                                    â”‚
â”‚          â†“                                                                  â”‚
â”‚  Response sent back to frontend âœ“                                           â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  Phase 2: DATA STORAGE                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚  Document in MongoDB:                                                      â”‚
â”‚  {                                                                          â”‚
â”‚    _id: UUID,                                                              â”‚
â”‚    userId: extracted from header,                                          â”‚
â”‚    ... user data,                                                          â”‚
â”‚    createdAt: auto-set by MongoDB,                                         â”‚
â”‚    updatedAt: auto-set by MongoDB                                          â”‚
â”‚  }                                                                          â”‚
â”‚  âœ“ Indexed by userId for fast queries                                      â”‚
â”‚  âœ“ Replicated across 3 MongoDB nodes                                       â”‚
â”‚  âœ“ Backed up daily automatically                                           â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  Phase 3: DATA READING                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
â”‚  Frontend calls: goalAPI.list()                                            â”‚
â”‚          â†“                                                                  â”‚
â”‚  Adds X-User-ID header to request                                         â”‚
â”‚          â†“                                                                  â”‚
â”‚  Backend receives request                                                  â”‚
â”‚          â†“                                                                  â”‚
â”‚  Query: Goal.find({ userId }) using index                                  â”‚
â”‚          â†“                                                                  â”‚
â”‚  Return only documents with matching userId                                â”‚
â”‚          â†“                                                                  â”‚
â”‚  Frontend caches response in localStorage                                  â”‚
â”‚          â†“                                                                  â”‚
â”‚  React state updated                                                       â”‚
â”‚          â†“                                                                  â”‚
â”‚  UI re-renders with data âœ“                                                 â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  Phase 4: DATA UPDATING                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
â”‚  Frontend calls: goalAPI.update(id, newData)                               â”‚
â”‚          â†“                                                                  â”‚
â”‚  Backend finds document by _id AND userId                                  â”‚
â”‚          â†“                                                                  â”‚
â”‚  Validates that user owns this document                                    â”‚
â”‚          â†“                                                                  â”‚
â”‚  MongoDB updates document                                                  â”‚
â”‚  â””â”€ updatedAt timestamp auto-refreshed                                     â”‚
â”‚          â†“                                                                  â”‚
â”‚  Return updated document âœ“                                                  â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  Phase 5: DATA DELETION                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚  Frontend calls: goalAPI.delete(id)                                        â”‚
â”‚          â†“                                                                  â”‚
â”‚  Backend finds document by _id AND userId                                  â”‚
â”‚          â†“                                                                  â”‚
â”‚  Validates that user owns this document                                    â”‚
â”‚          â†“                                                                  â”‚
â”‚  MongoDB deletes document                                                  â”‚
â”‚          â†“                                                                  â”‚
â”‚  Return success message âœ“                                                   â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  Phase 6: DATA ARCHIVING / BACKUP                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                          â”‚
â”‚  Every 24 hours (00:00 UTC):                                               â”‚
â”‚          â†“                                                                  â”‚
â”‚  Automated backup service runs                                             â”‚
â”‚          â†“                                                                  â”‚
â”‚  Export all MongoDB collections to JSON                                    â”‚
â”‚          â†“                                                                  â”‚
â”‚  Save as: backup-YYYY-MM-DD.json                                           â”‚
â”‚          â†“                                                                  â”‚
â”‚  Stored in: backups/ directory or cloud storage                            â”‚
â”‚          â†“                                                                  â”‚
â”‚  Can be restored if needed âœ“                                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Last Updated:** December 10, 2025
**Version:** 1.0
**Status:** Production Ready
